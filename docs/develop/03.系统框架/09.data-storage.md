# 数据存储

Nextpilot要存储的数据包括：航线（dataman）、参数（param）、日志（logger）、固件等。由于每种数据对存储设备有不同的要求，因此Nextpilot在硬件设计上，预留了以上接口。


## ROMFS 片上文件系统

ROMFS是片上只读文件系统，用于储存机架、配置、参数等信息（这些信息是跟随软件版本绑定的），并为其他文件系统提供挂点。ROMFS上的文件随着飞控代码一起编译，然后烧入芯片。

地面站在连接到飞控之后，首先会请求飞控的机架、配置、参数等信息，然后才进行后续工作。

## FM25V02 参数存储（非必须）

为了保证控制参数（比如PID)能够快速的读写，同时掉电不会擦除，因此一般控制参数保存到FRAM设备中。当然 Nextpilot 支持将param直接保存到microSD的文件中。

## W128Q256 航线存储（非必须）

Nextpilot支持上千个航点，以及禁飞区等，数据量很大，无法将航点信息全部加载到内存中，因此需要保存到flash中，飞行过程边飞边加载。由于microSD可能在飞行过程中松动，且读写速度较慢，因此一般建议将航线保存到Nor-Flash中。当然Nextpilot支持将航线保存到microSD中

同时出厂固件、出厂禁飞区等数据都保存到nor-flash中。

一般nor-flash挂载littlefs文件系统。


## microSD 日志存储（非必须）

microSD卡一般挂载FATFS文件系统，用于保存系统日志、飞行日志，飞控固件，用户数据等。