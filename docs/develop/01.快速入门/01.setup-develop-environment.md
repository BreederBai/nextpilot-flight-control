# 搭建开发环境

NextPilot 基于 [RT-Thread](https://www.rt-thread.org/) 实时操作系统，而 RT-Thread 官方提供了以下开发工具：

|辅助工具|代码仓库|下载地址|帮助文档|说明|
|---|---|---|---|---|
|RT-Thread Packages|[仓库](https://github.com/RT-Thread/packages)|[官网](https://github.com/RT-Thread/env)|[帮助](https://www.rt-thread.org/document/site/#/development-tools/env/env?id=%e7%94%a8%e6%88%b7%e8%bd%af%e4%bb%b6%e5%8c%85%e7%ae%a1%e7%90%86%e5%8a%9f%e8%83%bd)|
|RT-Thread Env|[仓库](https://github.com/RT-Thread/env)|/|/|
|RT-Thread Env-Windows|[仓库](https://github.com/RT-Thread/env-windows)|[下载](https://www.rt-thread.org/download.html#download-rt-thread-env-tool)|[帮助](https://www.rt-thread.org/document/site/#/development-tools/env/env)|
|RT-Thread Studio|/|[下载](https://www.rt-thread.org/download.html#download-rt-thread-studio)|[帮助](https://www.rt-thread.org/document/site/#/development-tools/rtthread-studio/um/studio-user-begin)|
|RT-Thread Studio|/|[下载](https://marketplace.visualstudio.com/items?itemName=RT-Thread.rt-thread-studio)|[帮助](https://club.rt-thread.org/ask/article/fc2771654de53b2f.html)|

[RT-Thread Env脚本](https://github.com/RT-Thread/env) ，为RT-Thread提供编译构建环境、图形化系统配置（menuconfig/Kconfig）及软件包管理（rt-thread packages）功能。其实是一组python脚本，用于搭建Ubuntu和windows下的开发环境，并提供了menuconfig（用于Kconfig系统配置RT-Thread项目）和pkgs（用于管理RT-Thread Packages）两套指令，用于辅助RT-Thread项目开发。

[RT-Thread Env-Windows](https://www.rt-thread.org/document/site/#/development-tools/env/env) ，是针对Windows加强版的RT-Thread Env脚本，不仅包含[RT-Thread Env](https://github.com/RT-Thread/env)，还增加了[RT-Thread Packages](https://github.com/RT-Thread/packages)索引库、python、 arm-gcc、[qemu（仿真模拟器）](https://www.qemu.org/)、 ConEmu（类似CMD的命令行终端），以及其它一些工具集合。

[RT-Thread Studio](https://www.rt-thread.org/document/site/#/development-tools/rtthread-studio/um/studio-user-begin) **集成开发环境（基于eclipse）**， 主要包括工程创建和管理，代码编辑，SDK管理，RT-Thread配置，构建配置，调试配置，程序下载和调试等功能，结合图形化配置系统以及软件包和组件资源，减少重复工作，提高开发效率。RT-Thread Studio集成了eclipse（IDE开发界面）+
[RT-Thread ENV-Windows](https://www.rt-thread.org/document/site/#/development-tools/env/env) +
ToolChain_Support_Packages（各种编译工具链） +
Debugger_Support_Packages（stlink、jlink调试器和qemu模拟器）  +
Board_Support_Packages（bsp） +
Chip_Support_Packages（csp） +
[RT-Thread_Source_Code（rt-thread代码仓库）](https://github.com/rt-thread/rt-thread.git) + ...

[RT-Thread Studio For Vscode](https://marketplace.visualstudio.com/items?itemName=RT-Thread.rt-thread-studio)插件，支持在 Vscode 编译和调是Rt-thread项目。NextPilot的虚拟飞行仿真使用到了该插件。

!!! note
    为了更好的进行 Nextpilot 项目开发，技术团队在RT-Thread ENV基础上重新制作了[Nextpilot-Windows-Toolchain](https://github.com/nextpilot/nextpilot-windows-toolchain.git)，它相当于[RT-Thread ENV-Windows](https://github.com/RT-Thread/env-windows)的定制升级版。

## Windows

### Nextpilot-windows-toolchain（推荐）

1、下载[Nextpilot-windows-toolchain](https://github.com/nextpilot/nextpilot-windows-toolchain.git)，并解压到任意**不包含中文**的目录。

2、运行以下命令将nextpilot-windows-toolchain添加到Windows terminal。

### 自己独立逐步安装

#### git 版本管理（推荐）

下载[Git for Windows](https://gitforwindows.org/)，一路默认安装即可。另外建议安装[TortoiseGit](https://tortoisegit.org/)，该工具提供了git操作的图形用户界面，方便初学者使用。

#### python（必须）

如果您的系统已经安装有python

#### arm-gcc（必须）

#### qemu（推荐）

!!! tips
    另外在调试网络驱动的时候，建议准备好 [tap-windows-9.21.2.exe](https://pan.baidu.com/s/1h2BmdL9myK6S0g8TlfSW0g) 和 [华为IP调试工具IPOP V4.1](http://www.xdowns.com/soft/524006.html)。

## Ubuntu

请使用以下脚本自动安装开发工具链。

### QEMU 模拟器

```shell
sudo apt-get install qemu-system-arm
```

### Scons 编译工具

```shell
sudo apt-get install scons
```

### gcc-arm 编译器

由于apt-get安装的编译器版本太旧会导致编译报错，使用如下命令下载安装新版本。默认安装到/opt/gcc-arm-none-eabi-6_2-2016q4/

```shell
cd /tmp
wget https://armkeil.blob.core.windows.net/developer/Files/downloads/gnu-rm/6-2016q4/gcc-arm-none-eabi-6_2-2016q4-20161216-linux.tar.bz2
tar xf ./gcc-arm-none-eabi-6_2-2016q4-20161216-linux.tar.bz2
mv gcc-arm-none-eabi-6_2-2016q4/ /opt/
/opt/gcc-arm-none-eabi-6_2-2016q4/bin/arm-none-eabi-gcc --version
```

### ncurses 库

```shell
sudo apt-get install libncurses5-dev
```

参考链接：
